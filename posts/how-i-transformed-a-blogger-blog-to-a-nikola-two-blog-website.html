<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>How I transformed a Blogger blog to a Nikola two-blog website | subsymbol.org</title>
<link href="../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="../assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../assets/css/colorbox.css" rel="stylesheet" type="text/css">
<link href="../assets/css/theme.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../rss.xml">
<link rel="canonical" href="http://www.subsymbol.org/posts/how-i-transformed-a-blogger-blog-to-a-nikola-two-blog-website.html">
<!--[if lt IE 9]><script src="/assets/js/html5.js"></script><![endif]--><meta name="author" content="L. Amber Wilcox-O'Hearn">
<meta name="og:title" content="How I transformed a Blogger blog to a Nikola two-blog website">
<meta name="og:url" content="http://www.subsymbol.org/posts/how-i-transformed-a-blogger-blog-to-a-nikola-two-blog-website.html">
<meta name="og:description" content="In the last post I described why I wanted to move my blog, and what went into my choices.
My goal in exporting my site from Blogger to Nikola was to separate my content into two separate blogs on a si">
<meta name="og:site_name" content="subsymbol.org">
<meta name="og:type" content="article">
</head>
<body>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://www.subsymbol.org/">

                <span id="blog-title">subsymbol.org</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
<li>
<a href="../archive.html">Archive</a>
                </li>
<li>
<a href="../categories/">Tags</a>
                </li>
<li>
<a href="../blog/">Blog</a>
                </li>
<li>
<a href="../journal/">Journal</a>
                </li>
<li>
<a href="../rss.xml">RSS feed</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>
    <a href="how-i-transformed-a-blogger-blog-to-a-nikola-two-blog-website.rst" id="sourcelink">Source</a>
    </li>

                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">How I transformed a Blogger blog to a Nikola two-blog website</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">L. Amber Wilcox-O'Hearn</span></p>
            <p class="dateline"><a href="#" rel="bookmark"><time class="published dt-published" datetime="2014-07-08T16:59:38+00:00" itemprop="datePublished" title="Publication date">2014-07-08 16:59</time></a></p>
                <p class="commentline">
        
    <a href="how-i-transformed-a-blogger-blog-to-a-nikola-two-blog-website.html#disqus_thread" data-disqus-identifier="cache/posts/how-i-transformed-a-blogger-blog-to-a-nikola-two-blog-website.html">Comments</a>


            
        </p>
<p class="sourceline"><a href="how-i-transformed-a-blogger-blog-to-a-nikola-two-blog-website.rst" id="sourcelink">Source</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>In the last post I described why I wanted to move my blog, and what went into my choices.
My goal in exporting my site from Blogger to Nikola was to separate my content into two separate blogs on a single site:
one which is the primary blog, and the other which resides in the background.
I wanted them to be archived separately.
I also wanted there to be a front page that didn't change every time I wrote a new post.</p>
<div class="section" id="importing-the-blog">
<h2>Importing the blog</h2>
<p>Nikola has a plugin to import a blog from Blogger, so the first step was to import the blog.
To import, I took the following steps:</p>
<ul class="simple">
<li>First, I exported my blog from Blogger, which gave me a file called <cite>blog-07-05-2014.xml</cite>. Then,</li>
</ul>
<pre class="code literal-block">
$ sudo pip install nikola
$ nikola plugin -i import_blogger
$ nikola import_blogger -o site blog-07-05-2014.xml # The -o tells nikola what directory to make the site in.
</pre>
<p>After this, I had some cleanup to do.
For one thing, Nikola renamed all the Blogger files (in a sensible way).
Blogger has date-derived subdirectories for posts, whereas in Nikola all the posts are kept in one folder, called "posts"
So when the new site is up, redirects will be required for anyone with the old link.</p>
<p>The import gave me a file called <cite>url_map.csv</cite>, which contained all the information necessary to redirect the old links to their new locations, but as far as I could tell, those redirects still had to be encoded into the configuration file to take effect.
Since I only had a few, I did this manually.
For every line in the url_map, I inserted a tuple into the <cite>REDIRECTIONS</cite> list in <cite>conf.py</cite>.</p>
<p>The result at this point was a Nikola blog that contained everything the old blog did.</p>
</div>
<div class="section" id="making-it-not-a-blog">
<h2>Making it not a blog</h2>
<p>There is a document in the Nikola project describing <a class="reference external" href="http://getnikola.com/creating-a-site-not-a-blog-with-nikola.html">how to make a non-blog site</a>.
The instructions boil down to changing three lines of <cite>conf.py</cite>.</p>
<div class="section" id="posts-and-pages">
<h3>Posts and Pages</h3>
<p>As usual, Nikola distinguishes two different kinds of text-derived files.</p>
<ul class="simple">
<li>
<em>Posts</em> are blog files.
They are archived, indexed by tag, and ordered by date for display.</li>
<li>
<em>Pages</em> are essentially independent.</li>
</ul>
<p>So to make a blog into a non-blog, you simply manipulate the variable <cite>POSTS</cite> defined in <cite>conf.py</cite>.
<cite>POSTS</cite> and <cite>PAGES</cite> are lists describing where to find posts or pages respectively, where to render them, and what template to use for them.
We let the <cite>POSTS</cite> list be empty, so everything on the site will be a page.</p>
<pre class="code literal-block">
POSTS = []
PAGES = [
        ("pages/*.rst", "", "story.tmpl"),
        ("pages/*.txt", "", "story.tmpl"),
        ]
</pre>
<p>The two entries for <cite>PAGES</cite> are here to allow either txt or rst, but the one that comes first is what will be used when you use the <cite>new_post</cite> command.</p>
<p>So you can create a <em>page</em> called "index.html" by running <cite>new_post -p</cite>, and giving it the name <cite>index</cite>.</p>
<pre class="code literal-block">
$ nikola new_post -p

[...]

Creating New Page
-----------------

Title: index

[...]
INFO: new_page: Your page's text is at: pages/index.rst
</pre>
<p>Since we put it at "", which is the top level of the site, it will be what you see on the "front page".</p>
<p>Unfortunately, this creates a conflict, because when you build the site, the <em>blog</em> part is already wired to make an index.html file in the top-level directory, since that's how blogs normally appear.
So you intercept this by adding to <cite>conf.py</cite> the line:</p>
<pre class="code literal-block">
INDEX_PATH = "blog"
</pre>
<p>This just makes it so the blog index is now created under the folder blog, instead of the top level, and it no longer conflicts.</p>
<p>It also means that now you can have a regular blog under the subdirectory blog, by putting options back in for <cite>POSTS</cite>:</p>
<pre class="code literal-block">
POSTS = [("posts/*.rst", "blog", "post.tmpl")]
</pre>
<p>But this is not enough for us, because we have imported posts from Blogger that were also being found from the <cite>POSTS</cite> list.
There is another entry in <cite>POSTS</cite> that we need back, that tells Nikola to also collect and render existing html files, such as those we imported.
So we need to add:</p>
<pre class="code literal-block">
("posts/*.html", "blog", "post.tmpl")
</pre>
<p>back into the list.</p>
</div>
</div>
<div class="section" id="two-blogs">
<h2>Two blogs</h2>
<p>At this point I had part of what I wanted.
I had a front page separate from my blog, and all of my previous blog reachable from the site.
But I still wanted to have two blogs, a primary one for themed entries, and a journal for unstructured reflections.</p>
<p>Here are the steps I took to factor the blogs apart:</p>
<ul class="simple">
<li>Made a new directory for the journal posts called "journal", and moved the appropriate files into it.</li>
<li>Added ("journal/<em>.rst", "journal", "story.tmpl") and ("journal/</em>.html", "journal", "story.tmpl") to the <cite>PAGES</cite> list, so old and new journal entries can be found for rendering.</li>
<li>Updated the conf.py <cite>REDIRECTIONS</cite> to reflect those</li>
</ul>
<p>This worked to render them and include them in the site, but the journal articles were not indexed.
That meant that if I knew the URL, I could go to the article, but a visitor to the site could never discover them.</p>
<p>To add indexing I had to add to conf.py:</p>
<pre class="code literal-block">
STORY_INDEX = True
</pre>
<p>But again, this created a conflict with multiple files called "index.html" trying to go in the same folder.
So I also had to change the name of the index.  I chose "index.htm", so that the server would automatically redirect.</p>
<pre class="code literal-block">
INDEX_FILE = "index.htm"
</pre>
<p>Finally, I wanted the journal to be findable without knowing the directory name "journal", so I updated the navigation links:</p>
<pre class="code literal-block">
NAVIGATION_LINKS = {
 DEFAULT_LANG: (
     ("/archive.html", "Archive"),
     ("/categories/", "Tags"),
     ("/blog/", "Blog"),
     ("/journal/", "Journal"),
     ("/rss.xml", "RSS feed"),
  ),
 }
</pre>
<p>As an extra configuration tweak, I set <cite>TAG_PAGES_ARE_INDEXES = True</cite>, so that when you go to the page for a given tag, it renders the posts themselves, rather than a list.</p>
<p>I would like to do that for my journal index as well, but that feature is not yet general, so if you navigate to "Journal" you will get a list of posts, and unfortunately, since it is a journal, they are named by date.
Moreover, their tags aren't collected.</p>
</div>
<div class="section" id="parting-thoughts">
<h2>Parting thoughts</h2>
<p>All in all, I'm satisfied with the move.
I got a lot of help from the Nikola community, and my main requirements are fulfilled.</p>
<p>There are a few remaining troubles.</p>
<div class="section" id="comments">
<h3>Comments</h3>
<p>I signed up with Disqus, and think I have initiated the process of importing my old comments, which I was reluctant to lose.
It takes an unspecified amount of time to complete, so I'm hoping that will take care of itself now, but I'm uncertain.</p>
</div>
<div class="section" id="orphaned-rst">
<h3>Orphaned rst</h3>
<p>Because of the way I built my Blogger site: writing in reStructuredText, converting to HTML, and uploading, I still have the original, pristine rst files on my local system, but Nikola doesn't use them.
It uses the backported HTML from Blogger.
In order to inject the old rst files into Nikola, however, would require manually editing them all to include the correct headers and timestamps.
This seems like a lot of work, and I'm not willing to do it right now.</p>
</div>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../categories/blogger.html" rel="tag">blogger</a></li>
           <li><a class="tag p-category" href="../categories/blogging.html" rel="tag">blogging</a></li>
           <li><a class="tag p-category" href="../categories/nikola.html" rel="tag">nikola</a></li>
        </ul>
<ul class="pager">
<li class="previous">
                <a href="moving-my-site-off-of-blogger.html" rel="prev" title="Moving my site off of Blogger">Previous post</a>
            </li>
            <li class="next">
                <a href="addresses-and-contents.html" rel="next" title="Addresses and Contents">Next post</a>
            </li>
        </ul></nav></aside><section class="comments"><h2>Comments</h2>
        
        
        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="subsymbolorg",
            disqus_url="http://www.subsymbol.org/posts/how-i-transformed-a-blogger-blog-to-a-nikola-two-blog-website.html",
        disqus_title="How I transformed a Blogger blog to a Nikola two-blog website",
        disqus_identifier="cache/posts/how-i-transformed-a-blogger-blog-to-a-nikola-two-blog-website.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="//disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section></article><script>var disqus_shortname="subsymbolorg";(function(){var a=document.createElement("script");a.async=true;a.src="//"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
        <!--End of body content-->

        <footer><br><br>Contents Â© 2014         <a href="mailto:amber@cs.toronto.edu">L. Amber Wilcox-O'Hearn</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         
            
        </footer>
</div>
</div>


            <script src="../assets/js/jquery.min.js"></script><script src="../assets/js/bootstrap.min.js"></script><script src="../assets/js/jquery.colorbox-min.js"></script><!-- Social buttons --><div id="addthisbox" class="addthis_toolbox addthis_peekaboo_style addthis_default_style addthis_label_style addthis_32x32_style">
<a class="addthis_button_more">Share</a>
<ul>
<li>
<a class="addthis_button_facebook"></a>
</li>
<li>
<a class="addthis_button_google_plusone_share"></a>
</li>
<li>
<a class="addthis_button_linkedin"></a>
</li>
<li>
<a class="addthis_button_twitter"></a>
</li>
</ul>
</div>
<script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4f7088a56bb93798"></script><!-- End of social buttons --><script>jQuery("a.image-reference").colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script>
</body>
</html>
